<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!--
  This file is part of Elios.

  Copyright 2010 Jeremie GASTON-RAOUL & Alexandre COLLIGNON

  Elios is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  Elios is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with Elios. If not, see <http://www.gnu.org/licenses/>.
-->

<HTML xmlns="http://www.w3.org/1999/xhtml"><HEAD><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<TITLE>Elios</TITLE>
<STYLE type="text/css">
<!--
.red
{
	color: red;
}

.green
{
	color: green;
}

table {
	border: solid 1px black;
	text-align:center;
}

#toolbar {
	text-align: center;
}

.title {
	font-size: 34px;
	font-family: courier, sans-serif;
	font-weight: bold;
	text-align: center;
}

.commandLine {
	font-size: 20px;
	width: 280px;
	height: 40px;
}

.button {
	font-size: 18px;
	width: 70px;
	height: 40px;
	border-width: 1px;
}

#responseMessage {
	font-size: 30px;
	background-color: #BBBBBB;
}
-->
</STYLE>

<SCRIPT type="text/javascript">
<!--
var send_xhr_object = null;
var params_xhr_object = null;
var isRequestActive = false;
var context="/data/";

var init = function()
{
	//alert("load");
	send_xhr_object = createXHRObject();
	params_xhr_object = createXHRObject();
	if(!send_xhr_object){
		alert("pas d'objet send");
		return;
	}
	if(!params_xhr_object){
		alert("pas d'objet params");
		return;
	}
	updateParams();
}

var createXHRObject = function()
{
	var tempXHR = null;
	if(window.XMLHttpRequest){ //firefox...
		tempXHR = new XMLHttpRequest();
	}
	else if(window.ActiveXObject){
		tempXHR = new ActiveXObject("Microsoft.XMLHTTP");
	}
	else return null;
	
	return tempXHR;
}

var updateParams = function(){
	makeRequest(params_xhr_object,'get','',context+'params',setNewParams);
}

var setNewParams = function(xhr_object){
	var paramsList = xhr_object.responseText.split('&');
	for(i in paramsList){
		var keyValue = paramsList[i].split('=');
		var paramElement = document.getElementById(keyValue[0]);
		if(paramElement){
			if(keyValue[0] == 'additiveMode'){
				paramElement.checked =  (keyValue[1] == 'true');
			}
			else{
				paramElement.value = keyValue[1];
			}
		}
	}
	setTimeout(updateParams,1000);
}

var makeRequest = function(xhr_object,method,query,url,responseHandler)
{
	xhr_object.open(method,url,true);
	
	xhr_object.onreadystatechange = function()
	{
		if(xhr_object.readyState == 4){
			isRequestActive = false;
			responseHandler(xhr_object);
		}
	}
	
	xhr_object.setRequestHeader("Content-type","application/x-www-form-urlencoded");
	xhr_object.send(query);
	isRequestActive = true;
}

var showResult= function(xhr_object)
{
	var responseMessageElement = document.getElementById("responseMessage");
	responseMessageElement.firstChild.nodeValue = xhr_object.responseText;
	
	if(xhr_object.status==200){
		responseMessageElement.className = "green";
		document.sendData.line.value = "";
	}
	else{
		responseMessageElement.className = "red";
	}
}

var addToCommandLine = function(value)
{
	document.sendData.line.value += value;
}

var delLastChar = function(){
	var length = document.sendData.line.value.length;
	if( length > 0){
		document.sendData.line.value = document.sendData.line.value.substring(0,length-1);
	}
}

-->
</SCRIPT>
</HEAD><BODY onload="init();">
<DIV class="title">Elios</DIV>
<DIV id="toolbar">
	Subnet : 
	<SELECT name="subnet" id="subnet" onchange="makeRequest(send_xhr_object,'post','subnet='+this.value,context+'params',showResult); return false">
		<OPTION>0</OPTION>
		<OPTION>1</OPTION>
		<OPTION>2</OPTION>
		<OPTION>3</OPTION>
		<OPTION>4</OPTION>
		<OPTION>5</OPTION>
		<OPTION>6</OPTION>
		<OPTION>7</OPTION>
		<OPTION>8</OPTION>
		<OPTION>9</OPTION>
		<OPTION>10</OPTION>
		<OPTION>11</OPTION>
		<OPTION>12</OPTION>
		<OPTION>13</OPTION>
		<OPTION>14</OPTION>
		<OPTION>15</OPTION>
	</SELECT>
	Universe :
	<SELECT name="universe" id="universe" onchange="makeRequest(send_xhr_object,'post','universe='+this.value,context+'params',showResult); return false">
		<OPTION>0</OPTION>
		<OPTION>1</OPTION>
		<OPTION>2</OPTION>
		<OPTION>3</OPTION>
		<OPTION>4</OPTION>
		<OPTION>5</OPTION>
		<OPTION>6</OPTION>
		<OPTION>7</OPTION>
		<OPTION>8</OPTION>
		<OPTION>9</OPTION>
		<OPTION>10</OPTION>
		<OPTION>11</OPTION>
		<OPTION>12</OPTION>
		<OPTION>13</OPTION>
		<OPTION>14</OPTION>
		<OPTION>15</OPTION>
	</SELECT>
	Additive : 
	<INPUT type="checkbox" id="additiveMode" onchange="makeRequest(send_xhr_object,'post','additiveMode='+this.checked,context+'params',showResult); return false"/>
</DIV>
<DIV id="command" name="command">
	<FORM onsubmit="return false" name="sendData" id="sendData">
		<TABLE align="center">
			<TR>
				<TD COLSPAN="4"><INPUT class="commandLine" name="line" type="text" id="line" value="" size="40"></TD>
			</TR>
			<TR>
				<TD><INPUT class="button" type="submit" name="key1" value="1" onclick="addToCommandLine('1')"></TD>
				<TD><INPUT class="button" type="submit" name="key2" value="2" onclick="addToCommandLine('2')"></TD>
				<TD><INPUT class="button" type="submit" name="key3" value="3" onclick="addToCommandLine('3')"></TD>
				<TD><INPUT class="button" type="submit" name="key_plus" value="+" onclick="addToCommandLine('+')"></TD>
			</TR>
			<TR>
				<TD><INPUT class="button" type="submit" name="key4" value="4" onclick="addToCommandLine('4')"></TD>
				<TD><INPUT class="button" type="submit" name="key5" value="5" onclick="addToCommandLine('5')"></TD>
				<TD><INPUT class="button" type="submit" name="key6" value="6" onclick="addToCommandLine('6')"></TD>
				<TD><INPUT class="button" type="submit" name="key_minus" value="-" onclick="addToCommandLine('-')"></TD>
			</TR>
			<TR>
				<TD><INPUT class="button" type="submit" name="key7" value="7" onclick="addToCommandLine('7')"></TD>
				<TD><INPUT class="button" type="submit" name="key8" value="8" onclick="addToCommandLine('8')"></TD>
				<TD><INPUT class="button" type="submit" name="key9" value="9" onclick="addToCommandLine('9')"></TD>
				<TD><INPUT class="button" type="submit" name="key_thru" value="/" onclick="addToCommandLine('/')"></TD>
			</TR>
			<TR>
				<TD><INPUT class="button" type="submit" name="key_sep" value=";" onclick="addToCommandLine(';')"></TD>
				<TD><INPUT class="button" type="submit" name="key0" value="0" onclick="addToCommandLine('0')"></TD>
				<TD><INPUT class="button" type="submit" name="key_at" value="@" onclick="addToCommandLine('@')"></TD>
				<TD><INPUT class="button" type="submit" name="key_full" value="F" onclick="addToCommandLine('F')"></TD>
			</TR>
			<TR>
				<TD><INPUT class="button" type="submit" name="Delete" value="Del" onclick="delLastChar(); return false"></TD>
				<TD><INPUT class="button" type="submit" name="Enter" value="Enter" onclick="makeRequest(send_xhr_object,'post',document.sendData.line.value,context+'commandLine',showResult); return false"></TD>
				<TD><INPUT class="button" type="reset" name="Reset" id="Reset" value="Reset"></TD>
				<TD><INPUT class="button" type="submit" name="key_dmx" value="D" onclick="addToCommandLine('D')"></TD>
			</TR>
			<TR>
				<TD COLSPAN="4" id="responseMessage" align="center" class="green">&nbsp;</TD>
			</TR>
		</TABLE>
	</FORM>
</DIV>
<P>&nbsp;</P>
<P >&nbsp;</P>

</BODY></HTML>