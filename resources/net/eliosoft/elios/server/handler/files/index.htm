<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!--
  This file is part of Elios.

  Copyright 2010 Jeremie GASTON-RAOUL & Alexandre COLLIGNON

  Elios is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  Elios is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with Elios. If not, see <http://www.gnu.org/licenses/>.
-->

<HTML xmlns="http://www.w3.org/1999/xhtml"><HEAD><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<TITLE>Elios</TITLE>
<STYLE type="text/css">
<!--
.red
{
	color: red;
}

.green
{
	color: green;
}

table {
	border: solid 1px black;
	text-align:center;
}

.title {
	font-size: 34px;
	font-family: courier, sans-serif;
	font-weight: bold;
}

.commandLine {
	font-size: 20px;
	width: 280px;
	height: 40px;
}

.button {
	font-size: 18px;
	width: 70px;
	height: 40px;
	border-width: 1px;
}

#responseMessage {
	font-size: 30px;
	background-color: #BBBBBB;
}
-->
</STYLE>

<SCRIPT type="text/javascript">
<!--
var xhr_object = null;
var isRequestActive = false;
var url="/data";

var init = function()
{
	//alert("load");
	xhr_object = createXHRObject();
	if(!xhr_object){
		alert("pas d'objet");
		return;
	}
	//else alert("objet cree");
}

var createXHRObject = function()
{
	var tempXHR = null;
	if(window.XMLHttpRequest){ //firefox...
		tempXHR = new XMLHttpRequest();
	}
	else if(window.ActiveXObject){
		tempXHR = new ActiveXObject("Microsoft.XMLHTTP");
	}
	else return null;
	
	return tempXHR;
}

var makeRequest = function(query)
{
	xhr_object.open('post',url,true);
	
	xhr_object.onreadystatechange = function()
	{
		if(xhr_object.readyState == 4){
			isRequestActive = false;
			showResult();
		}
	}
	
	xhr_object.setRequestHeader("Content-type","application/x-www-form-urlencoded");
	xhr_object.send(query);
	isRequestActive = true;
}

var showResult= function()
{
	var responseMessageElement = document.getElementById("responseMessage");
	responseMessageElement.firstChild.nodeValue = xhr_object.responseText;
	
	if(xhr_object.status==200){
		responseMessageElement.className = "green";
		document.sendData.line.value = "";
	}
	else{
		responseMessageElement.className = "red";
	}
}

var addToCommandLine = function(value)
{
	document.sendData.line.value += value;
}

var delLastChar = function(){
	var length = document.sendData.line.value.length;
	if( length > 0){
		document.sendData.line.value = document.sendData.line.value.substring(0,length-1);
	}
}

-->
</SCRIPT>
</HEAD><BODY onload="init();">

<FORM onsubmit="return false" name="sendData" id="sendData">
<TABLE align="center">
	<TR>
		<TD COLSPAN="4" class="title">Elios</TD>
	</TR>
	<TR>
		<TD COLSPAN="4"><INPUT class="commandLine" name="line" type="text" id="line" value="" size="40"></TD>
	</TR>
	<TR>
		<TD><INPUT class="button" type="submit" name="key1" value="1" onclick="addToCommandLine('1')"></TD>
		<TD><INPUT class="button" type="submit" name="key2" value="2" onclick="addToCommandLine('2')"></TD>
		<TD><INPUT class="button" type="submit" name="key3" value="3" onclick="addToCommandLine('3')"></TD>
		<TD><INPUT class="button" type="submit" name="key_plus" value="+" onclick="addToCommandLine('+')"></TD>
	</TR>
	<TR>
		<TD><INPUT class="button" type="submit" name="key4" value="4" onclick="addToCommandLine('4')"></TD>
		<TD><INPUT class="button" type="submit" name="key5" value="5" onclick="addToCommandLine('5')"></TD>
		<TD><INPUT class="button" type="submit" name="key6" value="6" onclick="addToCommandLine('6')"></TD>
		<TD><INPUT class="button" type="submit" name="key_minus" value="-" onclick="addToCommandLine('-')"></TD>
	</TR>
		<TR>
		<TD><INPUT class="button" type="submit" name="key7" value="7" onclick="addToCommandLine('7')"></TD>
		<TD><INPUT class="button" type="submit" name="key8" value="8" onclick="addToCommandLine('8')"></TD>
		<TD><INPUT class="button" type="submit" name="key9" value="9" onclick="addToCommandLine('9')"></TD>
		<TD><INPUT class="button" type="submit" name="key_thru" value="/" onclick="addToCommandLine('/')"></TD>
	</TR>
	<TR>
		<TD><INPUT class="button" type="submit" name="key_sep" value=";" onclick="addToCommandLine(';')"></TD>
		<TD><INPUT class="button" type="submit" name="key0" value="0" onclick="addToCommandLine('0')"></TD>
		<TD><INPUT class="button" type="submit" name="key_at" value="@" onclick="addToCommandLine('@')"></TD>
		<TD><INPUT class="button" type="submit" name="key_full" value="F" onclick="addToCommandLine('F')"></TD>
	</TR>
	<TR>
		<TD><INPUT class="button" type="submit" name="Delete" value="Del" onclick="delLastChar(); return false"></TD>
		<TD><INPUT class="button" type="submit" name="Enter" value="Enter" onclick="makeRequest(document.sendData.line.value); return false"></TD>
		<TD><INPUT class="button" type="reset" name="Reset" id="Reset" value="Reset"></TD>
		<TD><INPUT class="button" type="submit" name="key_dmx" value="D" onclick="addToCommandLine('D')"></TD>
	</TR>
	<TR>
		<TD COLSPAN="4" id="responseMessage" align="center" class="green">&nbsp;</TD>
	</TR>
</TABLE>
</FORM>
<P>&nbsp;</P>
<P >&nbsp;</P>

</BODY></HTML>